<div id="role-table" class="space-y-3">
  {% if roles %}
    {% for role in roles %}
      {% set meta = status_meta[role.status] %}
      <div class="flex flex-col gap-3 rounded-2xl border border-black/10 bg-white/80 p-4 md:flex-row md:items-center md:justify-between">
        <div>
          <p class="text-sm text-muted">{{ role.slug }}</p>
          <p class="text-lg font-semibold text-ink">{{ role.name }}</p>
          <p class="text-xs text-muted">{{ role.description or "暂无描述" }}</p>
        </div>
        <div class="flex flex-wrap items-center gap-2">
          <span class="tag" style="border-color: {{ meta.color }}; color: {{ meta.color }};">
            {{ meta.label }}
          </span>
          <a class="btn-ghost px-3" href="/admin/rbac?role={{ role.slug }}">查看权限</a>
          <button
            class="btn-ghost px-3"
            hx-get="/admin/rbac/roles/{{ role.slug }}/edit"
            hx-target="#modal-body"
            hx-swap="innerHTML"
            x-on:click="modalOpen = true"
          >
            编辑
          </button>
          <button
            class="btn-ghost px-3"
            hx-delete="/admin/rbac/roles/{{ role.slug }}"
            hx-target="#role-table"
            hx-swap="outerHTML"
            hx-confirm="确认删除该角色吗？"
            hx-indicator="#global-indicator"
          >
            删除
          </button>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="rounded-2xl border border-black/10 bg-white/70 p-6 text-center">
      <p class="font-display text-xl text-ink">暂无角色</p>
      <p class="mt-2 text-sm text-muted">请先创建角色。</p>
      <button
        class="btn-primary mt-4"
        hx-get="/admin/rbac/roles/new"
        hx-target="#modal-body"
        hx-swap="innerHTML"
        x-on:click="modalOpen = true"
      >
        立即新建
      </button>
    </div>
  {% endif %}
</div>
