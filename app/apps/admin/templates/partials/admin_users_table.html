<div id="admin-table" class="space-y-4">
  {% if items %}
    <div class="hidden overflow-hidden rounded-2xl border border-black/10 bg-white/80 md:block">
      <table class="w-full text-left text-sm">
        <thead class="bg-black/5 text-xs uppercase tracking-widest text-muted">
          <tr>
            <th class="px-4 py-3">账号</th>
            <th class="px-4 py-3">角色</th>
            <th class="px-4 py-3">邮箱</th>
            <th class="px-4 py-3">状态</th>
            <th class="px-4 py-3">最后登录</th>
            <th class="px-4 py-3 text-right">操作</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
            {% set meta = status_meta[item.status] %}
            <tr class="border-t border-black/5">
              <td class="px-4 py-3">
                <div class="font-semibold text-ink">{{ item.display_name }}</div>
                <div class="text-xs text-muted">{{ item.username }}</div>
              </td>
              <td class="px-4 py-3">
                <span class="tag">{{ role_map.get(item.role_slug, item.role_slug) }}</span>
              </td>
              <td class="px-4 py-3 text-muted">{{ item.email or "-" }}</td>
              <td class="px-4 py-3">
                <span class="tag" style="border-color: {{ meta.color }}; color: {{ meta.color }};">
                  {{ meta.label }}
                </span>
              </td>
              <td class="px-4 py-3 text-muted">{{ item.last_login | fmt_dt }}</td>
              <td class="px-4 py-3 text-right">
                <div class="flex justify-end gap-2">
                  <button
                    class="btn-ghost px-3"
                    hx-get="/admin/users/{{ item.id }}/edit"
                    hx-target="#modal-body"
                    hx-swap="innerHTML"
                    x-on:click="modalOpen = true"
                  >
                    编辑
                  </button>
                  <button
                    class="btn-ghost px-3"
                    hx-delete="/admin/users/{{ item.id }}"
                    hx-target="#admin-table"
                    hx-swap="outerHTML"
                    hx-confirm="确认删除该管理员吗？"
                    hx-indicator="#global-indicator"
                  >
                    删除
                  </button>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="grid gap-4 md:hidden">
      {% for item in items %}
        {% set meta = status_meta[item.status] %}
        <div class="card p-4">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm text-muted">{{ item.username }}</p>
              <p class="text-lg font-semibold text-ink">{{ item.display_name }}</p>
            </div>
            <span class="tag" style="border-color: {{ meta.color }}; color: {{ meta.color }};">
              {{ meta.label }}
            </span>
          </div>
          <div class="mt-3 text-sm text-muted">
            <p>角色：{{ role_map.get(item.role_slug, item.role_slug) }}</p>
            <p>邮箱：{{ item.email or "-" }}</p>
          </div>
          <div class="mt-4 flex gap-2">
            <button
              class="btn-ghost flex-1"
              hx-get="/admin/users/{{ item.id }}/edit"
              hx-target="#modal-body"
              hx-swap="innerHTML"
              x-on:click="modalOpen = true"
            >
              编辑
            </button>
            <button
              class="btn-ghost flex-1"
              hx-delete="/admin/users/{{ item.id }}"
              hx-target="#admin-table"
              hx-swap="outerHTML"
              hx-confirm="确认删除该管理员吗？"
              hx-indicator="#global-indicator"
            >
              删除
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="card p-10 text-center">
      <p class="font-display text-2xl text-ink">暂无管理员账号</p>
      <p class="mt-2 text-sm text-muted">可以通过“新建管理员”快速添加。</p>
      <button
        class="btn-primary mt-6"
        hx-get="/admin/users/new"
        hx-target="#modal-body"
        hx-swap="innerHTML"
        hx-indicator="#global-indicator"
        x-on:click="modalOpen = true"
      >
        立即新建
      </button>
    </div>
  {% endif %}
</div>
